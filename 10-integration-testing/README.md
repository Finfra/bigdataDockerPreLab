# 10. 통합 테스트 및 최적화

## 전체 시스템 통합 테스트
### 10.1 통합 테스트 자동화
* **클러스터 상태 체크**: Kafka, HDFS, Spark 상태 확인
* **데이터 플로우 테스트**: 엔드투엔드 파이프라인 검증
* **성능 테스트**: 처리량 및 지연시간 측정
* **장애 복구 테스트**: 서비스 중단 시 복구 능력 검증
* **통합 테스트 스크립트**: [`src/integration_test.sh`](src/integration_test.sh)

### 10.2 데이터 파이프라인 검증
* **Kafka 연결성**: 메시지 발송/수신 기능 테스트
* **스키마 검증**: JSON 스키마 호환성 확인
* **처리 지연시간**: 30초 이내 처리 완료 검증
* **데이터 무결성**: 입력 vs 출력 데이터 일치성
* **파이프라인 테스트**: [`src/test_data_pipeline.py`](src/test_data_pipeline.py)

## 성능 최적화 및 튜닝
### 10.3 성능 벤치마크
* **처리량 테스트**: 1000개 메시지 배치 처리 성능
* **지연시간 분석**: 평균/P95/최대 지연시간 측정
* **동시성 테스트**: 5개 스레드 동시 부하 테스트
* **병목지점 식별**: CPU, 메모리, 네트워크 사용률 분석
* **성능 테스트**: [`src/test_performance.py`](src/test_performance.py)

### 10.4 핵심 성능 지표
| 메트릭        | 목표값       | 측정방법                   |
| ------------- | ------------ | -------------------------- |
| 메시지 처리량 | 1000 msg/sec | Kafka 프로듀서 배치 테스트 |
| 평균 지연시간 | < 50ms       | 메시지 발송-저장 시간      |
| P95 지연시간  | < 100ms      | 백분위 기반 측정           |
| 데이터 손실률 | 0%           | 입력-출력 메시지 수 비교   |

## 부하 테스트 시나리오
### 10.5 실제 운영 환경 시뮬레이션
* **정상 부하**: 5장비 × 6회/분 = 30 msg/min
* **피크 부하**: 정상 부하 × 10배 = 300 msg/min
* **장애 시나리오**: 일부 서비스 중단 상황
* **복구 시나리오**: 서비스 재시작 후 데이터 복구

## 모니터링 및 알림 검증
### 10.6 운영 모니터링 체계
* **시스템 메트릭**: CPU, 메모리, 디스크 사용률
* **애플리케이션 메트릭**: 처리량, 에러율, 지연시간
* **비즈니스 메트릭**: 데이터 품질, 장비 상태
* **알림 임계값**: HIGH/CRITICAL 레벨별 즉시 알림

## 주요 최적화 포인트
* **Kafka 최적화**: 배치 크기, 압축, 파티션 조정
* **Spark 최적화**: 익스큐터 수, 메모리 할당, 병렬도
* **HDFS 최적화**: 복제인수, 블록 크기, 압축 방식
* **네트워크 최적화**: 버퍼 크기, 타임아웃 설정

## 주요 산출물
* 종합 통합 테스트 스위트
* 성능 벤치마크 및 분석 도구
* 부하 테스트 시나리오
* 운영 모니터링 검증 체계
